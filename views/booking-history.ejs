<!DOCTYPE html>
<html>

<head>
	<title>Booking History - My Car Parking System</title>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body>
	<!-- Navigation bar -->
	<nav class="navbar navbar-expand-md navbar-light bg-light">
		<a class="navbar-brand" href="/home"><i class="fas fa-car"></i> My Car Parking System</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
	</nav>
	<!-- Main section -->
	<div class="container mt-5">
		<div class="row">
			<div class="col-md-12 text-center">
				<h1>Welcome back, <%= user.fname %>!</h1>
				<h2>Booking History</h2>
				<% if (bookings.length===0) { %>
					<p>No bookings found.</p>
					<% } else { %>
						<table class="table table-striped">
							<thead>
								<tr>
									<th>Booking ID</th>
									<th>Car ID</th>
									<th>Parking Slot Number</th>
									<th>Booking Time</th>
									<th>Status</th>
								</tr>
							</thead>
							<tbody>
								<% bookings.forEach(function(booking) { %>
									<tr>
										<td>
											<%= booking._id %>
										</td>
										<td>
											<%= booking.carId %>
										</td>
										<td>
											#<%= booking.slotId %>
										</td>
										<td>
											<%= booking.startTime.toLocaleString() %>
										</td>
										<td>
											<% if (booking.status==='Booked' ) { %>
												<span class="badge badge-success">Booked</span>
												<% } else if (booking.status==='Pending' ) { %>
													<span class="badge badge-warning">Pending</span>
													<% } else if (booking.status==='Expired' ) { %>
														<span class="badge badge-danger">Expired</span>
														<% } else if (booking.status==='Cancelled' ) { %>
															<span class="badge badge-secondary">Cancelled</span>
															<% } %>
										</td>
									</tr>
									<% }) %>
							</tbody>
						</table>
						<% } %>
			</div>
		</div>
	</div>

	<!-- Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.min.js"></script>
</body>

</html>